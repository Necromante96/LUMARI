<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>InÃ­cio â€” Criador â€” LUMARI</title>
  <link rel="stylesheet" href="../css/styles.css">
  <style>
    .home-wrap{max-width:1000px;margin:0 auto}
    .metrics-grid{display:grid;gap:14px;margin-top:16px}
    @media(min-width:800px){.metrics-grid{grid-template-columns:repeat(4,1fr)}}
    .metric-card{padding:16px;border-radius:14px;border:1px solid rgba(255,255,255,0.08);background:linear-gradient(180deg,rgba(255,255,255,0.04),transparent)}
    .metric-title{font-size:14px;color:#ddd;margin-bottom:8px}
    .metric-value{font-size:28px;font-weight:800;color:#fff}
    .metric-bar{height:8px;border-radius:999px;background:rgba(255,255,255,0.08);overflow:hidden;margin-top:8px}
    .metric-fill{height:100%;width:0;background:linear-gradient(90deg, rgba(124,77,255,0.9), rgba(94,60,255,0.8));transition:width 0.6s ease}
    .top-actions{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  </style>
</head>
<body>
  <header class="topbar" role="banner" aria-label="Barra de navegaÃ§Ã£o">
    <div class="topbar-inner">
      <a href="../index.html" class="brand-mini" aria-label="LUMARI home">
        <img src="../logo/logo.jpg" alt="LUMARI" class="logo-mini">
      </a>
      <nav class="nav" role="navigation" aria-label="Menu principal">
        <a href="about.html">Quem somos?</a>
  <a href="features.html">Funcionalidades</a>
  <a href="credits.html">CrÃ©ditos</a>
  <span class="version-badge" aria-label="VersÃ£o atual">v0.0.9-alfa</span>
      </nav>
    </div>
  </header>

  <button id="audioToggle" class="audio-toggle" aria-pressed="false" aria-label="Ativar som">ðŸ”Š</button>

  <main class="container">
    <section class="intro home-wrap">
      <div class="top-actions">
        <h1>Painel Emocional â€” <span id="userName">Criador</span></h1>
  <a href="../index.html" id="logoutBtn" class="changelog-btn" style="padding:8px 12px">Sair</a>
      </div>
      <p class="muted">MÃ©tricas emocionais estimadas em tempo real com base nas interaÃ§Ãµes (mock para demonstraÃ§Ã£o).</p>
      <div class="metrics-grid">
        <div class="metric-card"><div class="metric-title">AtenÃ§Ã£o</div><div class="metric-value" id="m1v">0%</div><div class="metric-bar"><div class="metric-fill" id="m1"></div></div></div>
        <div class="metric-card"><div class="metric-title">Alegria</div><div class="metric-value" id="m2v">0%</div><div class="metric-bar"><div class="metric-fill" id="m2"></div></div></div>
        <div class="metric-card"><div class="metric-title">Surpresa</div><div class="metric-value" id="m3v">0%</div><div class="metric-bar"><div class="metric-fill" id="m3"></div></div></div>
        <div class="metric-card"><div class="metric-title">FrustraÃ§Ã£o</div><div class="metric-value" id="m4v">0%</div><div class="metric-bar"><div class="metric-fill" id="m4"></div></div></div>
      </div>
    </section>
  </main>

  <script defer src="../js/main.js"></script>
  <script>
    (function(){
      // garantir que o termo foi aceito antes de permitir uso
      setTimeout(()=>{
        try{ 
          if(typeof window.ensureTermsAcceptedOrShow === 'function'){ 
            const ok = window.ensureTermsAcceptedOrShow(); 
            if(!ok) return; 
          } 
        }catch(e){}
        
        function getUser(){ try{ return JSON.parse(localStorage.getItem('lumari_user')||'null'); }catch(e){ return null; } }
        const u = getUser();
        if(!u || u.role !== 'creator'){
          location.href = 'login.html?role=creator';
          return;
        }
        document.getElementById('userName').textContent = u.name || u.email || 'VocÃª';
        // mock de atualizaÃ§Ã£o de mÃ©tricas
        function rnd(min,max){ return Math.floor(Math.random()*(max-min+1))+min }
        function set(elPct, elVal){ return (v)=>{ elPct.style.width=v+'%'; elVal.textContent=v+'%'; } }
        const updaters = [
          set(document.getElementById('m1'), document.getElementById('m1v')),
          set(document.getElementById('m2'), document.getElementById('m2v')),
          set(document.getElementById('m3'), document.getElementById('m3v')),
          set(document.getElementById('m4'), document.getElementById('m4v')),
        ];
        function tick(){ updaters.forEach(u=>u(rnd(10,95))); }
        tick();
        setInterval(tick, 2500);
        document.getElementById('logoutBtn').addEventListener('click', (e)=>{ try{ localStorage.removeItem('lumari_user'); }catch(e){} });
      }, 100);
    })();
  </script>
</body>
</html>
